(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{N7ne:function(a,e,n){"use strict";n.r(e),n.d(e,"_frontmatter",(function(){return p})),n.d(e,"default",(function(){return b}));n("91GP"),n("rGqo"),n("yt8O"),n("Btvt"),n("RW0V"),n("FlsD"),n("q1tI");var t=n("7ljp"),s=n("hhGP");n("qKvR");function c(){return(c=Object.assign||function(a){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(a[t]=n[t])}return a}).apply(this,arguments)}var p={};void 0!==p&&p&&p===Object(p)&&Object.isExtensible(p)&&!p.hasOwnProperty("__filemeta")&&Object.defineProperty(p,"__filemeta",{configurable:!0,value:{name:"_frontmatter",filename:"src/pages/Deployment/Github_actions.md"}});var m={_frontmatter:p},l=s.a;function b(a){var e=a.components,n=function(a,e){if(null==a)return{};var n,t,s={},c=Object.keys(a);for(t=0;t<c.length;t++)n=c[t],e.indexOf(n)>=0||(s[n]=a[n]);return s}(a,["components"]);return Object(t.b)(l,c({},m,n,{components:e,mdxType:"MDXLayout"}),Object(t.b)("h1",{id:"deploy-documentation-automatic-with-github-actions"},"Deploy documentation automatic with Github Actions"),Object(t.b)("h2",{id:"add-workflow-to-source-code"},"Add workflow to source code"),Object(t.b)("p",null,"Create a new file in your source repository, named ",Object(t.b)("inlineCode",{parentName:"p"},".github/workflows/deploy_docs.yml")),Object(t.b)("p",null,"It could contain an action with this steps:"),Object(t.b)("pre",{className:"default-dark vscode-highlight","data-language":"yaml"},Object(t.b)("code",c({parentName:"pre"},{className:"vscode-highlight-code"}),Object(t.b)("span",c({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",c({parentName:"span"},{className:"mtk4"}),"name"),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),": "),Object(t.b)("span",c({parentName:"span"},{className:"mtk8"}),"Deploy documentation")),"\n",Object(t.b)("span",c({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}))),"\n",Object(t.b)("span",c({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",c({parentName:"span"},{className:"mtk4"}),"on"),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),":")),"\n",Object(t.b)("span",c({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),"  "),Object(t.b)("span",c({parentName:"span"},{className:"mtk4"}),"push"),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),":")),"\n",Object(t.b)("span",c({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),"    "),Object(t.b)("span",c({parentName:"span"},{className:"mtk4"}),"branches"),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),":")),"\n",Object(t.b)("span",c({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),"      - "),Object(t.b)("span",c({parentName:"span"},{className:"mtk8"}),"master")),"\n",Object(t.b)("span",c({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}))),"\n",Object(t.b)("span",c({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",c({parentName:"span"},{className:"mtk4"}),"jobs"),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),":")),"\n",Object(t.b)("span",c({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),"  "),Object(t.b)("span",c({parentName:"span"},{className:"mtk4"}),"build"),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),":")),"\n",Object(t.b)("span",c({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),"    "),Object(t.b)("span",c({parentName:"span"},{className:"mtk4"}),"runs-on"),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),": "),Object(t.b)("span",c({parentName:"span"},{className:"mtk8"}),"ubuntu-latest")),"\n",Object(t.b)("span",c({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),"    "),Object(t.b)("span",c({parentName:"span"},{className:"mtk4"}),"steps"),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),":")),"\n",Object(t.b)("span",c({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),"      - "),Object(t.b)("span",c({parentName:"span"},{className:"mtk4"}),"name"),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),": "),Object(t.b)("span",c({parentName:"span"},{className:"mtk8"}),"Checkout")),"\n",Object(t.b)("span",c({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),"        "),Object(t.b)("span",c({parentName:"span"},{className:"mtk4"}),"uses"),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),": "),Object(t.b)("span",c({parentName:"span"},{className:"mtk8"}),"actions/checkout@v1")),"\n",Object(t.b)("span",c({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}))),"\n",Object(t.b)("span",c({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),"      - "),Object(t.b)("span",c({parentName:"span"},{className:"mtk4"}),"name"),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),": "),Object(t.b)("span",c({parentName:"span"},{className:"mtk8"}),"Set Node.js")),"\n",Object(t.b)("span",c({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),"        "),Object(t.b)("span",c({parentName:"span"},{className:"mtk4"}),"uses"),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),": "),Object(t.b)("span",c({parentName:"span"},{className:"mtk8"}),"actions/setup-node@v1")),"\n",Object(t.b)("span",c({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),"        "),Object(t.b)("span",c({parentName:"span"},{className:"mtk4"}),"with"),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),":")),"\n",Object(t.b)("span",c({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),"          "),Object(t.b)("span",c({parentName:"span"},{className:"mtk4"}),"node-version"),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),": "),Object(t.b)("span",c({parentName:"span"},{className:"mtk8"}),"10.x")),"\n",Object(t.b)("span",c({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}))),"\n",Object(t.b)("span",c({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),"      - "),Object(t.b)("span",c({parentName:"span"},{className:"mtk4"}),"name"),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),": "),Object(t.b)("span",c({parentName:"span"},{className:"mtk8"}),"Install npm dependencies")),"\n",Object(t.b)("span",c({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),"        "),Object(t.b)("span",c({parentName:"span"},{className:"mtk4"}),"working-directory"),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),": "),Object(t.b)("span",c({parentName:"span"},{className:"mtk8"}),"./docs")),"\n",Object(t.b)("span",c({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),"        "),Object(t.b)("span",c({parentName:"span"},{className:"mtk4"}),"run"),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),": "),Object(t.b)("span",c({parentName:"span"},{className:"mtk8"}),"npm install")),"\n",Object(t.b)("span",c({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}))),"\n",Object(t.b)("span",c({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),"      - "),Object(t.b)("span",c({parentName:"span"},{className:"mtk4"}),"name"),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),": "),Object(t.b)("span",c({parentName:"span"},{className:"mtk8"}),"Run tests")),"\n",Object(t.b)("span",c({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),"        "),Object(t.b)("span",c({parentName:"span"},{className:"mtk4"}),"working-directory"),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),": "),Object(t.b)("span",c({parentName:"span"},{className:"mtk8"}),"./docs")),"\n",Object(t.b)("span",c({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),"        "),Object(t.b)("span",c({parentName:"span"},{className:"mtk4"}),"continue-on-error"),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),": "),Object(t.b)("span",c({parentName:"span"},{className:"mtk4"}),"false")),"\n",Object(t.b)("span",c({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),"        "),Object(t.b)("span",c({parentName:"span"},{className:"mtk4"}),"run"),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),": "),Object(t.b)("span",c({parentName:"span"},{className:"mtk8"}),"npm run test")),"\n",Object(t.b)("span",c({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}))),"\n",Object(t.b)("span",c({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),"      - "),Object(t.b)("span",c({parentName:"span"},{className:"mtk4"}),"name"),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),": "),Object(t.b)("span",c({parentName:"span"},{className:"mtk8"}),"Deploy pages")),"\n",Object(t.b)("span",c({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),"        "),Object(t.b)("span",c({parentName:"span"},{className:"mtk4"}),"working-directory"),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),": "),Object(t.b)("span",c({parentName:"span"},{className:"mtk8"}),"./docs")),"\n",Object(t.b)("span",c({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),"        "),Object(t.b)("span",c({parentName:"span"},{className:"mtk4"}),"run"),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),": "),Object(t.b)("span",c({parentName:"span"},{className:"mtk15"}),"|")),"\n",Object(t.b)("span",c({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),"          "),Object(t.b)("span",c({parentName:"span"},{className:"mtk8"}),'git config --global user.name "Spark documentation bot"')),"\n",Object(t.b)("span",c({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),"          "),Object(t.b)("span",c({parentName:"span"},{className:"mtk8"}),'git config --global user.email "spark@docbot.com"')),"\n",Object(t.b)("span",c({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",c({parentName:"span"},{className:"mtk1"}),"          "),Object(t.b)("span",c({parentName:"span"},{className:"mtk8"}),"npx gatsby build --prefix-paths && npx gh-pages -d public -r https://${{ secrets.GH_TOKEN }}@github.com/losol/doksi.git")))),Object(t.b)("p",null,"Please remember to change the link to your own git repository."),Object(t.b)("h2",{id:"get-personal-access-token"},"Get personal access token"),Object(t.b)("p",null,"In GitHub Settings -> Developer -> Personal access token, create a new Personal access token with repo scope:\n",Object(t.b)("img",{alt:"image",src:"https://user-images.githubusercontent.com/17168367/69485965-ad869780-0e46-11ea-91a3-dbbdf6c70be3.png"})),Object(t.b)("h2",{id:"add-repo-secret"},"Add repo secret"),Object(t.b)("p",null,"Then add a new secret to the repo settings, with name ",Object(t.b)("inlineCode",{parentName:"p"},"GH_TOKEN")),Object(t.b)("p",null,Object(t.b)("img",{alt:"image",src:"https://user-images.githubusercontent.com/17168367/69485949-4b2d9700-0e46-11ea-92f7-8b3098913918.png"})),Object(t.b)("style",{className:"vscode-highlight-styles"},"\n  :root {\n  --vscode-highlight-padding-v: 1rem;\n  --vscode-highlight-padding-h: 1.5rem;\n  --vscode-highlight-padding-top: var(--vscode-highlight-padding-v);\n  --vscode-highlight-padding-right: var(--vscode-highlight-padding-h);\n  --vscode-highlight-padding-bottom: var(--vscode-highlight-padding-v);\n  --vscode-highlight-padding-left: var(--vscode-highlight-padding-h);\n  --vscode-highlight-border-radius: 8px;\n\n  --vscode-highlight-line-highlighted-background-color: transparent;\n  --vscode-highlight-line-highlighted-border-width: 4px;\n  --vscode-highlight-line-highlighted-border-color: transparent;\n}\n\n.vscode-highlight {\n  overflow: auto;\n  -webkit-overflow-scrolling: touch;\n  padding-top: 1rem;\n  padding-top: var(--vscode-highlight-padding-top);\n  padding-bottom: 1rem;\n  padding-bottom: var(--vscode-highlight-padding-bottom);\n  border-radius: 8px;\n  border-radius: var(--vscode-highlight-border-radius);\n  font-feature-settings: normal;\n}\n\n.vscode-highlight-code {\n  display: inline-block;\n  min-width: 100%;\n}\n\n.vscode-highlight-line {\n  display: inline-block;\n  box-sizing: border-box;\n  width: 100%;\n  padding-left: 1.5rem;\n  padding-left: var(--vscode-highlight-padding-left);\n  padding-right: 1.5rem;\n  padding-right: var(--vscode-highlight-padding-right);\n}\n\n.vscode-highlight-line-highlighted {\n  background-color: var(--vscode-highlight-line-highlighted-background-color);\n  box-shadow: inset var(--vscode-highlight-line-highlighted-border-width) 0 0 0 var(--vscode-highlight-line-highlighted-border-color);\n}\n\n  .default-dark {\nbackground-color: #1E1E1E;\ncolor: #D4D4D4;\n}\n\n.default-dark .mtk1 { color: #D4D4D4; }\n.default-dark .mtk2 { color: #1E1E1E; }\n.default-dark .mtk3 { color: #6A9955; }\n.default-dark .mtk4 { color: #569CD6; }\n.default-dark .mtk5 { color: #D16969; }\n.default-dark .mtk6 { color: #D7BA7D; }\n.default-dark .mtk7 { color: #B5CEA8; }\n.default-dark .mtk8 { color: #CE9178; }\n.default-dark .mtk9 { color: #646695; }\n.default-dark .mtk10 { color: #4EC9B0; }\n.default-dark .mtk11 { color: #DCDCAA; }\n.default-dark .mtk12 { color: #9CDCFE; }\n.default-dark .mtk13 { color: #000080; }\n.default-dark .mtk14 { color: #F44747; }\n.default-dark .mtk15 { color: #C586C0; }\n.default-dark .mtk16 { color: #6796E6; }\n.default-dark .mtk17 { color: #808080; }\n.default-dark .mtki { font-style: italic; }\n.default-dark .mtkb { font-weight: bold; }\n.default-dark .mtku { text-decoration: underline; text-underline-position: under; }\n"))}b&&b===Object(b)&&Object.isExtensible(b)&&!b.hasOwnProperty("__filemeta")&&Object.defineProperty(b,"__filemeta",{configurable:!0,value:{name:"MDXContent",filename:"src/pages/Deployment/Github_actions.md"}}),b.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-deployment-github-actions-md-469a57c42e5e8cbfa5ac.js.map